# Docusaurus 완벽 가이드

> Docusaurus는 React 기반의 정적 사이트 생성기로, 문서 사이트를 빠르게 구축할 수 있다.

---

# 1. 설치 및 시작

```bash
# 프로젝트 생성
npx create-docusaurus@latest my-website classic

# 개발 서버 실행
cd my-website
npm run start
```

`http://localhost:3000`에서 확인 가능

---

# 2. 프로젝트 구조

```
my-website/
├── blog/                 # 블로그 포스트
├── docs/                 # 문서 파일
├── src/
│   ├── components/       # React 컴포넌트
│   ├── css/              # 커스텀 CSS
│   └── pages/            # 커스텀 페이지
├── static/               # 정적 파일 (이미지 등)
├── docusaurus.config.js  # 메인 설정 파일
├── sidebars.js           # 사이드바 설정
└── package.json
```

---

# 3. docusaurus.config.js 설정

```javascript
export default {
  // ============ 사이트 메타데이터 ============
  title: '내 사이트',              // 브라우저 탭에 표시되는 제목
  tagline: '멋진 문서 사이트',      // 사이트 슬로건
  url: 'https://my-site.com',     // 배포될 URL
  baseUrl: '/',                   // 기본 경로 (GitHub Pages의 경우 '/repo-name/')
  favicon: 'img/favicon.ico',     // 파비콘 경로

  // ============ GitHub Pages 배포 설정 ============
  organizationName: 'my-org',     // GitHub 조직/사용자명
  projectName: 'my-project',      // GitHub 저장소명
  deploymentBranch: 'gh-pages',   // 배포 브랜치

  // ============ 동작 설정 ============
  onBrokenLinks: 'throw',         // 깨진 링크 발견 시: 'throw' | 'warn' | 'ignore'
  onBrokenMarkdownLinks: 'warn',  // 깨진 마크다운 링크 발견 시

  // ============ 다국어 설정 ============
  i18n: {
    defaultLocale: 'ko',
    locales: ['ko', 'en'],
  },

  // ============ 프리셋 ============
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          sidebarPath: './sidebars.js',
          editUrl: 'https://github.com/my-org/my-project/edit/main/',
        },
        blog: {
          showReadingTime: true,  // 읽는 시간 표시
          blogSidebarCount: 'ALL', // 사이드바에 모든 포스트 표시
        },
        theme: {
          customCss: './src/css/custom.css',
        },
      },
    ],
  ],

  // ============ 테마 설정 ============
  themeConfig: {
    navbar: {
      title: '내 사이트',
      logo: { alt: 'Logo', src: 'img/logo.svg' },
      items: [
        { type: 'doc', docId: 'intro', position: 'left', label: '문서' },
        { to: '/blog', label: '블로그', position: 'left' },
        { href: 'https://github.com/my-org', label: 'GitHub', position: 'right' },
      ],
    },
    footer: {
      style: 'dark',
      copyright: `Copyright © ${new Date().getFullYear()} My Project`,
    },
    docs: {
      sidebar: {
        hideable: true,              // 사이드바 숨김 가능
        autoCollapseCategories: true, // 카테고리 자동 접기
      },
    },
  },
};
```

---

# 4. 사이드바 설정 (sidebars.js)

## 자동 생성 (폴더 구조 기반)
```javascript
export default {
  tutorialSidebar: [
    {
      type: 'autogenerated',
      dirName: '.',  // docs 폴더 전체
    },
  ],
};
```

## 수동 설정
```javascript
export default {
  tutorialSidebar: [
    'intro',  // docs/intro.md
    {
      type: 'category',
      label: '튜토리얼',
      collapsible: true,   // 접을 수 있음
      collapsed: false,    // 기본 펼침 상태
      items: [
        'tutorial/step1',
        'tutorial/step2',
      ],
    },
    {
      type: 'link',
      label: '외부 링크',
      href: 'https://google.com',
    },
  ],
};
```

## 폴더별 카테고리 설정 (_category_.json)
```json
{
  "label": "튜토리얼",
  "position": 2,
  "collapsible": true,
  "collapsed": false,
  "link": {
    "type": "generated-index",
    "description": "튜토리얼 목록입니다."
  }
}
```

---

# 5. 마크다운 기능

## MDX 지원
마크다운 안에서 React 컴포넌트 사용 가능:
```mdx
import MyComponent from '@site/src/components/MyComponent';

# 제목

<MyComponent />
```

## Admonitions (경고문/알림)

```markdown
:::note
일반 노트입니다.
:::

:::tip
유용한 팁입니다.
:::

:::info
추가 정보입니다.
:::

:::warning
주의해야 할 사항입니다.
:::

:::danger
위험! 중요한 경고입니다.
:::

:::note[커스텀 제목]
제목을 변경할 수 있습니다.
:::
```

## 코드 블록

### 기본 + 제목
````markdown
```javascript title="src/index.js"
console.log('Hello, World!');
```
````

### 라인 강조
````markdown
```javascript {1,4-6}
const a = 1;  // 1번 줄 강조
const b = 2;
const c = 3;
const d = 4;  // 4-6번 줄 강조
const e = 5;
const f = 6;
```
````

### 주석으로 강조
```javascript
function example() {
  // highlight-next-line
  const highlighted = true;

  // highlight-start
  const multiLine = 1;
  const highlighting = 2;
  // highlight-end
}
```

### 라인 번호 표시
````markdown
```javascript showLineNumbers
const a = 1;
const b = 2;
```
````

## 탭
```mdx
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="npm" label="npm" default>
    npm install package
  </TabItem>
  <TabItem value="yarn" label="yarn">
    yarn add package
  </TabItem>
</Tabs>
```

## 접기 (Details)
```markdown
<details>
  <summary>클릭하여 펼치기</summary>

  숨겨진 내용입니다.

</details>
```

---

# 6. 스타일링

## CSS 변수 (src/css/custom.css)
```css
:root {
  /* 기본 색상 */
  --ifm-color-primary: #2e8555;
  --ifm-color-primary-dark: #29784c;
  --ifm-color-primary-darker: #277148;
  --ifm-color-primary-darkest: #205d3b;
  --ifm-color-primary-light: #33925d;
  --ifm-color-primary-lighter: #359962;
  --ifm-color-primary-lightest: #3cad6e;

  /* 코드 폰트 크기 */
  --ifm-code-font-size: 95%;
}

/* 다크 모드 */
[data-theme='dark'] {
  --ifm-color-primary: #25c2a0;
  --ifm-background-color: #1b1b1d;
}
```

## CSS 모듈
```css
/* src/components/Button.module.css */
.button {
  background-color: var(--ifm-color-primary);
  padding: 10px 20px;
}
```

```jsx
import styles from './Button.module.css';

export default function Button() {
  return <button className={styles.button}>Click</button>;
}
```

---

# 7. 배포

## 빌드
```bash
npm run build
# build/ 폴더에 정적 파일 생성
```

## GitHub Pages 배포

### 설정
```javascript
// docusaurus.config.js
export default {
  url: 'https://username.github.io',
  baseUrl: '/my-project/',
  organizationName: 'username',
  projectName: 'my-project',
  trailingSlash: false,
};
```

### 배포 명령어
```bash
# Linux/macOS
GIT_USER=username npm run deploy

# Windows (PowerShell)
$env:GIT_USER="username"; npm run deploy

# Windows (cmd)
set GIT_USER=username && npm run deploy
```

### GitHub Actions 자동 배포
`.github/workflows/deploy.yml`:
```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - run: npm ci
      - run: npm run build
      - uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./build
```

## Vercel 배포
1. Vercel에서 GitHub 저장소 연결
2. 자동으로 설정 인식
3. 푸시할 때마다 자동 배포

## Netlify 배포
```
Build command: npm run build
Publish directory: build
```

---

# 8. 유용한 플러그인

```javascript
// docusaurus.config.js
export default {
  plugins: [
    // Sass/SCSS 지원
    'docusaurus-plugin-sass',

    // 검색 (Algolia)
    [
      '@docusaurus/plugin-search-local',
      { hashed: true },
    ],

    // 라이브 코드 에디터
    '@docusaurus/theme-live-codeblock',

    // 수학 방정식 (KaTeX)
    'remark-math',
    'rehype-katex',
  ],
};
```

---

# 9. 자주 쓰는 명령어

| 명령어 | 설명 |
|--------|------|
| `npm start` | 개발 서버 실행 |
| `npm run build` | 프로덕션 빌드 |
| `npm run serve` | 빌드된 사이트 로컬 테스트 |
| `npm run deploy` | GitHub Pages 배포 |
| `npm run clear` | 캐시 삭제 |
| `npm run swizzle` | 테마 컴포넌트 커스터마이징 |

---

# 10. 문서 버전 관리

```bash
# 현재 docs를 버전으로 저장
npm run docusaurus docs:version 1.0.0
```

구조:
```
docs/              # 최신 (next) 버전
versioned_docs/
  version-1.0.0/   # 1.0.0 버전
versions.json      # 버전 목록
```

---

# 참고 링크

- 공식 문서: https://docusaurus.io/docs
- GitHub: https://github.com/facebook/docusaurus
- Showcase: https://docusaurus.io/showcase
