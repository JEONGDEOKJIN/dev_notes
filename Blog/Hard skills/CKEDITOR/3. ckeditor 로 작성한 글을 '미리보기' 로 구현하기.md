
# ìš”êµ¬ ì‚¬í•­ 
```
1. CKEditor ì—ì„œ ì‘ì„±í•˜ê³  'ë¯¸ë¦¬ë³´ê¸° ë²„íŠ¼' ì„ ëˆ„ë¥´ë©´, ì‹¤ì œ DB ê°€ ë³€ê²½ë˜ê¸° ì „ì—, ë¯¸ë¦¬ë³´ê¸°ê°€ ë™ì‘í•œë‹¤. 
2. ì„ì‹œ ì €ì¥ìœ„ì¹˜ë¥¼ localStorage ë¥¼ ì‚¬ìš©í•œë‹¤. 
```

# process

## 1. CKEditor ì—ì„œ ì‘ì„± â†’ handlePreviewBtn ë¡œ ë“¤ì–´ê° 
```tsx
    <div className="main-container">
      <div
        className="editor-container editor-container_classic-editor"
        ref={editorContainerRef}
      >
        <div className="editor-container__editor">
          <div ref={editorRef}>
            {ClassicEditor && editorConfig && (
              <CKEditor
                editor={ClassicEditor}
                config={editorConfig}
                onChange={handlePreviewBtn} // ğŸŸ¢ onChange í•¸ë“¤ëŸ¬ ì¶”ê°€
              />
            )}
          </div>
        </div>
      </div>
    </div>
```

## 2. handlePreviewBtn ì—ì„œ localStorage ì— ì €ì¥ 
```tsx
  const handlePreviewBtn = (_event: any, editor: any) => {
    const data = editor.getData(); // CKEditorì—ì„œ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°
    localStorage.setItem("editorContent_mainCampaign", data); // localStorageì— ì €ì¥
    console.log("editorContent_mainCampaign", data);
  };
```

- ì´ìŠˆ ì‚¬í•­ 
```
1) ì—¬ê¸°ì—ì„œ, onChange ê°€ ë°œìƒí•  ë•Œ ë§ˆë‹¤ ì €ì¥í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, onClick ê°™ì€ê²Œ ë°œìƒí–ˆì„ ë•Œ ì €ì¥í•´ì•¼? 
```

# [1ì°¨ ìˆ˜ì •ëœ ì½”ë“œ] ë¶€ëª¨ í˜ì´ì§€ì—ì„œ í´ë¦­ì„ ê°ì§€í•˜ê³ , useState ë¥¼ ê´€ë¦¬í•´ì„œ, localStorage ì— ì €ì¥í•˜ë„ë¡

## 1. ë¶€ëª¨ í˜ì´ì§€ì˜ useState ì— 'ìµœì¢…ì €ì¥ ì „ì— ì„ì‹œ ì €ì¥' ê³µê°„ì„ ë§Œë“ ë‹¤.
```tsx
  const [HTMLeditorData, setHTMLEditorData] = useState("");
```

## 2. ì—ë””í„°ê°€ ìˆ˜ì •ë˜ë©´ -> ë¶€ëª¨í˜ì´ì§€ì˜ useState ì— ì„ì‹œ ì €ì¥í•œë‹¤.
```tsx
const handleOnChange = (event: any, editor: any) => {
    setHTMLEditorData(editor.getData());
  };
  return (
    <div className="main-container">
      <div
        className="editor-container editor-container_classic-editor"
        ref={editorContainerRef}
      >
        <div className="editor-container__editor">
          <div ref={editorRef}>
            {ClassicEditor && editorConfig && (
              <CKEditor
                editor={ClassicEditor}
                config={editorConfig}
                onChange={handleOnChange} // ğŸŸ¢ onChange í•¸ë“¤ëŸ¬ ì¶”ê°€
              />
            )}
          </div>
        </div>
      </div>
    </div>
  );
```


## 3. ë¯¸ë¦¬ë³´ê¸° ì‹¤í–‰ë˜ë©´ -> handlePreviewBtn ì‹¤í–‰í•˜ì—¬ -> useState ì— ì €ì¥ëœ ê°’ì„ localstorage ì €ì¥
```
  const handlePreviewBtn = () => {
    if (HTMLeditorData) {
      localStorage.setItem("editorContent_mainCampaign", HTMLeditorData); // localStorageì— ì €ì¥
      console.log("editorContent_mainCampaign", data);
    }
  };

``` 


## [ê·¸ ë‹¤ìŒ ë¬¸ì œ] 
```
1) `FO_MAIN_CAMPAIGN.tsx` ì—ì„œ, `editorContent_mainCampaign` key ê°’ì— í•´ë‹¹í•˜ëŠ” localStorage ê°€ ë³€í–ˆë‹¤ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì¸ì§€í•´ì„œ, ê°’ì„ ê°€ì ¸ì˜¤ì§€? ?

2) `FO_MAIN_CAMPAIGN.tsx` ì—ì„œë„, 'ê¸°ì¡´ ì •ìƒ API' ê°€ ìˆì„í…ë°, LOCAL STORAGE ì—ì„œ ì˜¤ëŠ”ê²Œ PREVIEW ë°ì´í„° ë¼ëŠ” ê±¸ ì•Œê³ , ì–´ë–»ê²Œ 'ì •ì‹ API' ì™€ 'PREVIEW API' ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆì§€?
```




# [2ì°¨ ë¦¬íŒ©í† ë§] 


## [ê¸€ ì €ì¥] 1) ê¸€ ì‘ì„±í•˜ëŠ” ìˆœê°„ 2) 'ë¯¸ë¦¬ë³´ê¸°' í´ë¦­í–ˆì„ ë•Œ 
1. ê¸€ ì‘ì„± ì €ì¥í•˜ëŠ” ìˆœê°„, ë¯¸ë¦¬ë³´ê¸° í™”ë©´ì— ë°˜ì˜ë˜ê²Œ í•˜ê¸°
```tsx
  useEffect(() => {
    // í¸ì§‘í•˜ëŠ” ìˆœê°„, localStorageì— ì €ì¥í•˜ê¸°
      localStorage.setItem("editorContent_mainCampaign", HTMLeditorData); 
  }, [HTMLeditorData])
```

2. í´ë¦­í•˜ë©´, 1) ì €ì¥ë˜ê³  2) ë¯¸ë¦¬ë³´ê¸° í˜ì´ì§€ë¡œ ì´ë™
```tsx
  const handlePreviewBtn = () => {
    // í´ë¦­í•˜ë©´ ì €ì¥í•˜ê³  ë¯¸ë¦¬ë³´ê¸° í˜ì´ì§€ë¡œ ì´ë™
    if (HTMLeditorData) {
      localStorage.setItem("editorContent_mainCampaign", HTMLeditorData); // localStorageì— ì €ì¥

      //  ë¯¸ë¦¬ë³´ê¸° í˜ì´ì§€ë¡œ ì´ë™
      window.open(
        "/popups/preview/mainCampaign",
        "_blank",
        "width=800,height=600"
      );
    }
  };
```



## preview page 

### 0. useEffect ë¥¼ 2ë²ˆ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ì´ìœ ? (#â­â­â­â­â­) 
```
1. handlePreviewBtn ê°€ ì‹¤í–‰ë˜ë©´ 1) 'ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥' í•˜ê³  2) í˜ì´ì§€ë¥¼ ì´ë™ í•œë‹¤. 
2. ì´ë•Œ, í˜ì´ì§€ë¥¼ ì´ë™í–ˆë‹¤ê³  í•´ì„œ, ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì—ˆë‹¤ëŠ” ë³´ì¥ì´ ì—†ë‹¤. (#ë¹„ë™ê¸° ì‘ì—… ì´ê¸° ë•Œë¬¸ì—): 

3. ë”°ë¼ì„œ, ê°’ì„ ëª» ê°€ì ¸ì™”ë‹¤ëŠ” ê°€ì • í•˜ì— 
	3.1 í˜ì´ì§€ê°€ ë¡œë“œ ë  ë•Œ, localStorate ì—ì„œ ê°€ì ¸ì˜¤ê³  
		- (#ì´ë•Œ, ê°’ì´ ì—…ë°ì´íŠ¸ ë˜ì–´ ìˆìœ¼ë©´, ë•¡í)
		- (#ê°’ì´ ì—…ë°ì´íŠ¸ ì•ˆ ë˜ì–´ ìˆìœ¼ë©´, ê·¸ ë‹¤ìŒ ì½”ë“œì—ì„œ í•˜ë©´ ë¨)
	3.2 localStorage ì—ì„œ 'ì €ì¥ë¨' ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, ê°’ì„ ë‹¤ì‹œ ê°€ì ¸ì˜´ 
		- ì´ë•Œ, ì´ë²¤íŠ¸ì— í•¨ê»˜ ë°”ì¸ë”© ë˜ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì“°ë©´ í¸í•¨ 
		- ë‹¤ë§Œ, ì´ë•Œ, ì™œ localStorage.getItem ì„ ì“°ë©´ ì•ˆ ë˜ëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŒ 

```

### 1. ì´ˆê¸°ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
```tsx
  // ğŸŸ¢ localStorageì—ì„œ ì´ˆê¸°ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    const storedContent = localStorage.getItem("editorContent_mainCampaign");
    if (storedContent) {
      setPreviewContent(storedContent);
    }
  }, []);
```

### 2. ê°’ ì—…ë°ì´íŠ¸ í•˜ê¸° 
```tsx
  useEffect(() => {
    const handleStorageChange = (event: StorageEvent) => {
      if (event.key === "editorContent_mainCampaign") {
        setPreviewContent(event.newValue);
        console.log("ğŸ“¢ ë¯¸ë¦¬ë³´ê¸° ë°ì´í„° ê°ì§€ë¨:", event.newValue);
      }
    };

    window.addEventListener("storage", handleStorageChange);

    return () => {
      window.removeEventListener("storage", handleStorageChange);
    };
  }, []);
```


### 3. useState ì— ì €ì¥ëœ ê°’ì„ HTML ë¡œ ê·¸ë ¤ì£¼ê¸° 
```tsx
  const [previewContent, setPreviewContent] = useState<string | null>(null);
```

```tsx
<div>
    {previewContent ? (
      <div>
        <h2>ğŸŸ¢ ë¯¸ë¦¬ë³´ê¸° ë°ì´í„° (PREVIEW)</h2>
        <div
          className="preview-content"
          dangerouslySetInnerHTML={{ __html: previewContent }} //  HTML ë¬¸ìì—´ì´ë¼ë©´, ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì œ HTMLë¡œ ë Œë”ë§í•¨ 
        />
      </div>
    ) : (
      <h2>ğŸ“¢ ì •ì‹ API ë°ì´í„°ë¥¼ ë°˜ì˜í•œ ì»´í¬ë„ŒíŠ¸</h2>
    )}
  </div>
```

