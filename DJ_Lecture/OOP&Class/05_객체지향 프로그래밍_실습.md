# 목표

### 핵심을 쉽게 요약 해보면 (#⭐⭐⭐ 이 목차 중요)

```jsx
공통 부분 -> 그룹핑 -> 클래스로 빼서 재사용

핵심 로직 = '서비스' 라고 함! 
	-> 이 서비스를 '의사코드' 로 작성하게 되겠지
	
돈과 관련된 건 -> cache service 를 만들어서 사용 
	핵심 로직을 비즈니스 로직 이라고 함 
	비즈니스 하는데 '핵심' 이 된다는 것

클래스를 사용해서 '분리' '재사용' 
	핵심은 파사드 패턴을 만드는 것 
		1) API 가 들어왔을 때, 핵심 흐름이 뭘 하는지 알면 됨 
		2) 구체적인 구현상태는 알 필요가 없음 
		3) 궁금하면, 그때 들어가서 확인하면 됨 ( #⭐⭐⭐⭐⭐ )

```

### 세부 목표

- 상품 관련된거니까 → product.js, 계산 관련된거니까, cache.js 로 나눌 수 있다. (#코드 캠프 06-05-OOP 실습)
    
    
    - 기존에 만든 의사 코드
        
        ```jsx
        [구매하기 눌렸을 때] 
        	1) 가진 돈 검증 코드 
        			- 몽고 DB 가져오고 
        			- 000 하고
        	
        	2) 판매 여부를 검증하는 코드 
        			- 판매 여부를 하는지 
        			- 000 
        	
        	3) 상품 구매하는 코드 
        			- 돈이 있는지 확인 
        			
        			// 상품판매완료가 아닌 경우
        			if(돈있고 && !상품판매완료){
        				res.send('상품 구매 완료')
        			}
        			
        [환불하기] 
        	1) 판매여부 검증 
        	
        	2) 상품 환불 코드 
        		// 판매 완료 상태인 경우
        		if(판매완료){
        			res.send('상품 환불 완료')
        		}
        ```
        
    - 상품 관련된거 → product.js, 계산괸련 → cash.js 로 묶기
        
        
        - `cash.js`
        
        ```jsx
        class CashService {
        	checkValue = () => {
        	// ...
        	}
        }
        ```
        
        - `product.js`
        
        ```jsx
        class ProductService {
        	checkSoldOut = () => {
        	// ...
        	}
        }
        ```
        
        - `index.js` 만들어진 설명서(클래스) 사용하기 (# 이미 비즈니스 로직으로 넘어간 상태 #⭐⭐⭐)
            
            ```jsx
            기존에 10줄인게 -> 2줄로 줄었음 
            ```
            
            - 구매 처리 API
                
                ```jsx
                app.post( 'product/buy', (req, res) => {
                // 1. 가진돈 검증하는 코em
                // class 명은 '대문자' 로 시작하는 거 
                // 인스턴스는 앞글자만 '소문자' 로 넣는게! 규칙 (#컨벤션)
                const cashService = new CashService() 
                // has, is (#컨벤션 #boolean 은 has, is 로 시작 #⭐⭐)
                const hasMoney = cashService.checkValue()
                
                // 2. 상품 구매여부 검증 (10=>20줄)
                const productService = new ProductService() 
                const isSoldOut = productService.checkSoldOut()
                
                // 3. 상품 구매 
                // 돈이 있으면서, 상품이 판매 완료가 아닌 상태
                if(hasMoney && !isSoldOut){
                					res.send('상품 구매 완료')
                }
                })
                
                ```
                
            - 환불 처리 API
                
                ```jsx
                app.post( 'products/refund', () => {
                // 1.  상품 구매여부 검증 (10=>20줄)
                const productService = new ProductService() 
                const isSoldOut = productService.checkSoldOut()  
                // 이미 비즈니스 로직으로 넘어간 상태 #⭐⭐
                
                // 3. 상품 구매 
                // 돈이 있으면서, 상품이 판매 완료가 아닌 상태
                if(isSoldOut){
                	res.send('상품 환불 완료')
                }
                
                } )
                ```
                
            
            - 시사점 : `효율적인 상태` 는 1) API 가 들어왔을 때, 핵심 흐름이 뭘 하는지 알면 됨 2) 구체적인 구현상태는 알 필요가 없음 3) 궁금하면, 그때 들어가서 확인하면 됨 ( #⭐⭐⭐⭐⭐ )
                
                ![image.png](attachment:1e3b5d53-7c70-4bdd-954b-0ed08e92355f:image.png)
                
            
            ![image.png](attachment:1b0e0973-0106-434b-9497-1cd41d08ff16:image.png)
            
        

- `폴더 구조` 를 깔끔하게 만들 수 있다 (# 이건 보충!)