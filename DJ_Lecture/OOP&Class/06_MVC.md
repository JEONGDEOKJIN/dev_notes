### í•µì‹¬ì„ ì‰½ê²Œ ìš”ì•½ í•´ë³´ë©´ (#â­â­â­ ì´ ëª©ì°¨ ì¤‘ìš”)

```jsx
í´ë” êµ¬ì¡°ë¥¼ ê¹”ë”í•˜ê²Œ í•˜ë ¤ë©´? 
	-> ë§ì€ ì‚¬ëŒë“¤ì´ ì“°ëŠ” MVC íŒ¨í„´! 
```

### ì„¸ë¶€ ëª©í‘œ

- ì™œ ì‚¬ëŒë“¤ì€ `MVC` ë¥¼ ê¹”ë”í•˜ë‹¤ê³  ìƒê°í•˜ê³ , `íš¨ìœ¨ì ` ì´ë¼ê³  ìƒê°í•˜ê³  ì“¸ê¹Œ?

- MVC í´ë”ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.
    
    ```jsx
    controllers 
    	|-- api ë“¤ 
    	
    models 
    	|-- DB ë¶€ë¶„ë“¤
    	
    views
    	|-- ë³´ì—¬ì£¼ëŠ” í™”ë©´
    	|-- HTML 
    	
    	
    Q. html ì´ ì—¬ê¸° ì™œ ìˆì§€?
    	- ì•„ë˜ ì°¸ê³  
    ```
    
    - html ì´ ì—¬ê¸° ì™œ ìˆì§€? (#â­â­â­â­â­â­â­)
        
        ```jsx
        ì˜ˆì „ì—ëŠ” ë°±ì—”ë“œ, í”„ë¡ íŠ¸ì—”ë“œ êµ¬ë¶„ì´ ì—†ì—ˆ
        		ì„œë²„ëŠ” 
        			1) json ì„ ì‘ë‹µì¤„ ìˆ˜ë„ ìˆê³  
        			2) html ì„ ì‘ë‹µ ì¤„ ìˆ˜ë„ ìˆë‹¤. 
        
        ì§€ê¸ˆì€
        		json ë§Œ ì£¼ëŠ” ì„œë²„ë¥¼ ë”°ë¡œ ë§Œë“¤ì -> ë°±ì—”ë“œ! 
        				: json ë§Œ ì£¼ëŠ” api ë“¤
        		html ë§Œ ì£¼ëŠ” ì„œë²„ë¥¼ ë”°ë¡œ ë§Œë“¤ì -> í”„ë¡ íŠ¸ ì—”ë“œ 
        				: html ë§Œ ì£¼ëŠ” api ë“¤ 
        				
        ê·¸ë˜ì„œì§€ê¸ˆì€
        	-> views ë¥¼ ì‚¬ìš©í•  ì¼ì´ ì—†ìŒ!!! 
        	-> so, ê·¸ëƒ¥, ë¹ˆ íŒŒì¼ ë„£ìœ¼ë©´ ë¨ 
        ```
        
        ![image.png](attachment:f9663da9-fbbd-428b-a379-af0d6f595ff3:image.png)
        
    
    - `models.js` ì—ëŠ” ë­˜ ë„£ì§€?
        
        ```jsx
        ëª½ê³  DB ë•Œ í–ˆë˜ model ê°ì²´ ë„£ìœ¼ë©´ ë¨ 
        ```
        
    - `controller.js` ì—ëŠ”?
        
        ```jsx
        1) api ë¥¼ ë„£ëŠ”ë‹¤ê³  í–ˆëŠ”ë°? ë­˜ ë„£ëŠ”ê±°ì•¼? 
        ```
        
        - api ì˜ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ë¹¼ì„œ â†’ í•œ íŒŒì¼ì— ë„£ì„ ê²ƒ ì„
            
            ![image.png](attachment:8ac8d87f-0d86-480c-ad5e-44202c7c0ffb:image.png)
            
        
        ```jsx
        2) í´ë” ì´ë¦„ì€ ì–´ë–»ê²Œ êµ¬ì„±? 
        		|- 'product/refund' API ë¡œ ë“¤ì–´ì˜¤ë©´ -> product í´ë” 
        		|- 'board/refund' API ë¡œ ë“¤ì–´ì˜¤ë©´ -> board í´ë” 
        		
        ğŸ‘‰ ì¦‰, api êµ¬ì¡°ì— ë”°ë¼ì„œ ë„£ëŠ”ê±° ê°™ìŒ
        ```
        
    - `views` ì—ëŠ”?
        
        ```jsx
        ë¹ˆ íŒŒì¼ë§Œ 
        ì™œëƒë©´, ì§€ê¸ˆ html ì‘ë‹µì€ í”„ë¡ íŠ¸ ì„œë²„ê°€ ë‹´ë‹¹
        ```
        
    
    - api ì˜ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ â†’ `ê·¸ë£¹í•‘` í•˜ê¸° â†’ í´ë˜ìŠ¤ë¡œ ë¬¶ê¸°
        
        ```jsx
        ì»¨íŠ¸ë¡¤ëŸ¬ = ì»¨íŠ¸ë¡¤ í•´ì£¼ëŠ” ê±° 
        	-> ë°ì´í„°ê°€ ë“¤ì–´ì™€ì„œ, DB ì— ë“¤ì–´ê°€ê¸° ì „ê¹Œì§€, ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê±° 
        	-> ì»¨íŠ¸ë¡¤ í•œë‹¤
        	-> ë­˜? 'íë¦„' ì„ ? 
        ```
        
        - API ë°›ê¸° (#â­â­â­)
            
            ```jsx
            import {ProductController} // ì´ê±° ê°€ì ¸ì˜¤ëŠ”ê±° 
            // import ëŠ” ê°œë³„ì ìœ¼ë¡œ ê°€ì ¸ì˜¨ê±° ì˜€ë‚˜ 
            
            const productController = new ProductController()
            
            // ì—¬ê¸°ì—ì„œ 'ì‹¤í–‰' í•˜ëŠ” ê±´ ì•„ë‹˜
            // 'ì—°ê²°' ë§Œ í•˜ëŠ” ê²ƒ ì„ (#â­â­â­) 
            // ì›ë˜ ìˆë˜ êµ¬ì¡°ë¥¼ ìƒê°í•˜ë©´, ê·¸ëƒ¥, ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ì–´ë‘”ê±° ì˜€ìŒ (#â­â­â­)
            app.post( 'product/buy', productController.buyProduct )
            
            app.post( 'products/refund', productController.refundProduct )
            
            ```
            
        - ì»¨íŠ¸ë¡¤ëŸ¬
            
            ```jsx
            class ProductController {
            
            	buyProduct = (req, res) => {
            // 1. ê°€ì§„ëˆ ê²€ì¦í•˜ëŠ” ì½”em
            // class ëª…ì€ 'ëŒ€ë¬¸ì' ë¡œ ì‹œì‘í•˜ëŠ” ê±° 
            // ì¸ìŠ¤í„´ìŠ¤ëŠ” ì•ê¸€ìë§Œ 'ì†Œë¬¸ì' ë¡œ ë„£ëŠ”ê²Œ! ê·œì¹™ (#ì»¨ë²¤ì…˜)
            const cashService = new CashService() 
            // has, is (#ì»¨ë²¤ì…˜ #boolean ì€ has, is ë¡œ ì‹œì‘ #â­â­)
            const hasMoney = cashService.checkValue()
            
            // 2. ìƒí’ˆ êµ¬ë§¤ì—¬ë¶€ ê²€ì¦ (10=>20ì¤„)
            const productService = new ProductService() 
            const isSoldOut = productService.checkSoldOut()
            
            // 3. ìƒí’ˆ êµ¬ë§¤ 
            // ëˆì´ ìˆìœ¼ë©´ì„œ, ìƒí’ˆì´ íŒë§¤ ì™„ë£Œê°€ ì•„ë‹Œ ìƒíƒœ
            if(hasMoney && !isSoldOut){
            					res.send('ìƒí’ˆ êµ¬ë§¤ ì™„ë£Œ')
            }
            })
            	
            	
            	refundProduct = () => {
            // 1.  ìƒí’ˆ êµ¬ë§¤ì—¬ë¶€ ê²€ì¦ (10=>20ì¤„)
            const productService = new ProductService() 
            const isSoldOut = productService.checkSoldOut()  
            // ì´ë¯¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìœ¼ë¡œ ë„˜ì–´ê°„ ìƒíƒœ #â­â­
            
            // 3. ìƒí’ˆ êµ¬ë§¤ 
            // ëˆì´ ìˆìœ¼ë©´ì„œ, ìƒí’ˆì´ íŒë§¤ ì™„ë£Œê°€ ì•„ë‹Œ ìƒíƒœ
            if(isSoldOut){
            	res.send('ìƒí’ˆ í™˜ë¶ˆ ì™„ë£Œ')
            }
            
            } )
            
            }
            ```
            

- service ë“¤ì€ `controller > service` ì•ˆì— êµ¬ì„±í•˜ë©´ ë¨
    
    ```jsx
    controller 
    	|-- services
    				|-- cash.service.js
    				|-- product.service.js
    				
    ```
    
    ![image.png](attachment:50b5320b-6ada-426c-97b9-3cade3e8a87d:image.png)
    
- íë¦„ (#â­â­â­ ê¸°ë³¸ì ìœ¼ë¡œ íŒŒì¼ì´ë‘, í´ë”ê°€ ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§)
    
    ```jsx
    ëª¨ë“ˆ-ì»¨íŠ¸ë¡¤ëŸ¬-service
    
    nest.js ê°€ ì´ êµ¬ì¡°ë¥¼ ë”°ë¥´ê³  ìˆë‹¤!!! (#â­â­â­) 
    
    module : api ê°€ ë“¤ì–´ì˜¤ëŠ” ê³³ 
    controller : ê° service ì˜, ê°œë³„ ë¡œì§ë“¤ì´ ë“¤ì–´ì™€ì„œ, ì´ë ‡ê²Œ ì €ë ‡ê²Œ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê³³ 
    service : ê° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë“¤ì´, 'ê·¸ë£¹í•‘', ë˜ì–´ì„œ, ëª¨ì¸ ê³³  
    
    ```
    
    ![image.png](attachment:4cc23c72-0114-45e3-848a-69f1a1c86aa1:image.png)