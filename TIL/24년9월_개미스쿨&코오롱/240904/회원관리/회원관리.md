
# `íšŒì›ê´€ë¦¬` íƒ­ì˜ `ì¡°íšŒ` ê¸°ëŠ¥ (#ìœ„ ì‚¬í•­ ì°¸ê³ í•˜ê³ , 'ì²´í¬ë¦¬ìŠ¤íŠ¸' ë§Œë“¤ì–´ì„œ ì§„í–‰í•˜ê¸°)

## `ê¸°ê°„` ì¡°íšŒ 

### ì²´í¬ ë¦¬ìŠ¤íŠ¸ 

```jsx

/*1. ì‹¤ì œ api ë°ì´í„° ì¸ì§€ í™•ì¸ 
  - service í•˜ìœ„ ì´ë¦„ì´ ì£¼ì†Œì™€ ë§¤ì¹­ë˜ëŠ”ì§€ í™•ì¸ ex) getReply -   return http.get<any>(`/admin/article/reply`, { params });
*/

/*
  1.2 Database.ts ì˜ value ì´ë¦„ê³¼ DB ì—ì„œ ë‚´ë ¤ì˜¤ëŠ” ì´ë¦„ì´ ë™ì¼í•œì§€ í™•ì¸ 
*/
-> í˜„ì¬(240904) ì‹¤ì œ ë°ì´í„°ê°€ ì—†ìœ¼ë‹ˆ, swagger ë³´ê³  ì‘ì—…



/*
2. ìƒíƒœ ë³€ìˆ˜ì— ë„£ê¸° 
  2.1 ê°ì²´ êµ¬ì¡° ë¶„í•´í• ë‹¹ì´ ì œëŒ€ë¡œ ë˜ëŠ”ì§€ í™•ì¸ 
    - api ë¡œ ë‚´ë ¤ì˜¤ëŠ” í•„ë“œê°€, ì œëŒ€ë¡œ, ë˜ì–´ìˆì§€ ì•Šì„ ìˆ˜ ìˆìŒ 

  2.2 ìƒíƒœì½”ë“œì— ë”°ë¥¸ ë¶„ê¸° ì²˜ë¦¬ 
  
  2.2 ì •ìƒì²˜ë¦¬ ë˜ì—ˆì„ ë•Œ, 'ë°±ì—”ë“œì—ì„œ ë˜ì§„ ë°ì´í„°' ì™€ 'í”„ë¡ íŠ¸ì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” ë°ì´í„°' ê°„ ì°¨ì´ê°€ ìˆìœ¼ë¯€ë¡œ -> ë°ì´í„° ê°€ê³µí•˜ê¸° 
    - ex) ë‚ ì§œ ë°ì´í„°ì—ì„œ T ì—†ì• ê¸° 'createAt: item.createAt.replace("T", " ")'
  
  2.3 í˜ì´ì§€ë„¤ì´ì…˜ì—ì„œ ìš”êµ¬í•˜ëŠ” item ê°œìˆ˜, ì „ì²´ í˜ì´ì§€ ìˆ˜ ë“±ì„ ë§ì¶°ì„œ setState ì— ì €ì¥í•˜ê¸° ex) app\boardArticle\page.tsx

  2.4 'ì´ˆê¸°ê°’ ì„¤ì •' ëŒ€ë¡œ ì •í™•íˆ ë‚´ë ¤ì˜¤ëŠ”ì§€ í™•ì¸ 
    - 'ì´ˆê¸°ê°’' ì„¤ì •ì€ useForm ì—ì„œ ì²˜ìŒ ë“±ë¡í•  ë•Œ, ex) app\boardArticle\page.tsx í™•ì¸
    -> í˜„ì¬, ëŒ“ê¸€ ì‹¤ì œ ë°ì´í„°ê°€ ì—†ì–´ì„œ, ì¶”ê°€ì ì¸ í™•ì¸ ë¶ˆê°€ğŸ“›ğŸ“›

3. 'ì„ íƒí•œ ê¸°ê°„ê°’ì´ ì¿¼ë¦¬ë¡œ ë„˜ì–´ê°€ëŠ”ì§€' í™•ì¸ 
    -> í˜„ì¬, ëŒ“ê¸€ ì‹¤ì œ ë°ì´í„°ê°€ ì—†ì–´ì„œ, ì¶”ê°€ì ì¸ í™•ì¸ ë¶ˆê°€ğŸ“›ğŸ“›
*/
```
[240904] 
- í˜„ì¬, ê¸°ê°„ì€ ì œëŒ€ë¡œ ì¿¼ë¦¬ë¡œ ë„˜ì–´ê°
- ì‹¤ì œ ë°ì´í„°ê°€ ì—†ì–´ì„œ, í…ŒìŠ¤íŠ¸ê°€ í˜ë“¦. 



## `ìƒíƒœ` ì¡°íšŒ 

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 
```jsx
/*
  1.Database.ts ì—ì„œ ê¸°íšì„œì— ë§ê²Œ label ì„¤ì • 
*/
    // [ë°©ë²•-1] í•˜ë‚˜ì˜ í•„ë“œì— ëŒ€í•´ì„œ true, false, ì „ì²´, ë¡œ ì§„í–‰
    export const selectReport3 = [
      {
        label: "ì „ì²´",
        value: "",
      },
      {
        label: "ì°¨ë‹¨",
        value: "true",
      },
      {
        label: "ì°¨ë‹¨í•´ì œ",
        value: "false",
      },
    ];

    // [ë°©ë²•-2] value ì•ˆì— 'í•„ë“œ/boolean' ì„ ë„£ì–´ì„œ ì§„í–‰ 
      // (ğŸ“›ğŸ“›)ë§Œì•½, ì´ë ‡ê²Œ í•˜ë©´, getFreshData ì—ì„œ íŒŒì‹±ì„ í•´ì„œ, ë„£ì–´ì¤˜ì•¼ í•¨
      export const selectReport3 = [
        {
          label: "ì „ì²´",
          value: "",    // ì´ë ‡ê²Œ í•˜ë©´ ì•„ë¬´ê²ƒë„ ì•ˆ ë„˜ì–´ê° 
        },
        {
          label: "ì°¨ë‹¨",
          value: "isBlocked/true",
        },
        {
          label: "ì°¨ë‹¨í•´ì œ",
          value: "isBlocked/false",
        },
      ];


/*
  2. statusType ì— ëŒ€í•´ ê°’ì„ ì„¤ì •í•˜ë©´, React hook form ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ëŠ”ì§€ í™•ì¸ 
*/
    // 2.1 
    <FilterOption
      title="ìƒíƒœ"
      content={<Radio name="statusType" items={selectReport3} />}
    />

    // ì—¬ê¸°ì—ì„œ Radio ì»´í¬ë„ŒíŠ¸ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ë©´, register ê°€ ìˆìŒ. ì´ ìˆœê°„, react hook form ìœ¼ë¡œ ë“±ë¡ë¨
            <input
              id={label}
              type="radio"
              value={value}
              disabled={disabled}
              {...register(name, rules)} 
              className={classNames(
                HiddenInputConfig,
                !disabled && "cursor-pointer "
              )}
            />


/*
  3. React hook form ì˜ ì´ˆê¸°ê°’ì— ì–´ë–»ê²Œ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸ 
*/
    // 3.1 
      const methods = useForm<FormInput>({
        mode: "onBlur",
        defaultValues: {
            ... 
          statusType: "isDeleted", // ì´ë ‡ê²Œ í•„ë“œëª…ë§Œ ê¸°ì…í•œ ì´ìœ ëŠ”, 'isDeleted/true/ ë¡œ í•˜ë©´, ì²´í¬ë°•ìŠ¤ ìƒ‰ê¹”ì´ ì¹ í•´ì§€ê¸° ë•Œë¬¸
          orderTypeAdmin: "createAt",
        },
      });

/*
  4. 'ê²€ìƒ‰(ì¡°íšŒ)' ë¥¼ ëˆŒë €ì„ ë•Œ, onSearch ê°€ ì‹¤í–‰ë˜ëŠ” ê±´ì§€ í™•ì¸
*/
    // 4.1 'ê²€ìƒ‰ ë²„íŠ¼' ì´ ë³´ì´ê²Œ í•˜ëŠ” ê³³ : ì–´ë”˜ì§€ ì˜ ëª¨ë¥´ê² ìŒ ğŸ˜¢ğŸ˜¢

    // 4.2 onSearch ì†ì„±ì— ë°”ì¸ë”© ë¨
        onSearch={methods.handleSubmit(onSearch)}

    // 4.3 onSearch í•¨ìˆ˜ 
          // ê²€ìƒ‰
            const onSearch = (data: any) => {
              methods.setValue("page", 1);
              getFreshData(data, 1);
            };

/*
  5. getFreshData ì—ì„œ ê°’ì„ ì œëŒ€ë¡œ íŒŒì‹±í•´ì„œ, ì¿¼ë¦¬ì— ë‹´ëŠ”ì§€ í™•ì¸
*/
    // 5.1 getFreshData í•¨ìˆ˜ì—ì„œ ìƒíƒœ(statusType) ë¥¼ íŒŒì‹±í•´ì„œ, parameter ì— ë„£ì–´ì£¼ê¸° 
        // ë°ì´í„° ì—…ë°ì´íŠ¸
            const getFreshData = useCallback(
              (data: any, page: number) => {
                const {
                  orderTypeAdmin,
                  statusType,
                  ...
                } = data;
                const [statusTypeBy, statusTypeBool] = statusType.split('/');  // 'ìƒíƒœ' ì„¹ì…˜ ì„¤ì • â­â­â­
                const [sortBy, sortDirection] = orderTypeAdmin.split('/');  // 'ì •ë ¬' ì„¹ì…˜ ì„¤ì • â­â­â­
                  ...
                const updatedParams = {
                  ...params,
                  "page.offset": page,
                  "page.sortBy" : sortBy, 
                  "page.sortDirection" : sortDirection, 
                  "range.startAt": makeDay(start_at),
                  "range.endAt": makeDay(end_at),
                  [statusTypeBy]: statusTypeBool , 
                };
                getData(updatedParams);
              },
              [getData]
            );

      // 5.2 ì¿¼ë¦¬ì— ê°’ì´ ì œëŒ€ë¡œ ë‹´ê¸°ëŠ”ì§€ í™•ì¸

```

### [ì§„í–‰ìƒíƒœ]

- [240904] ìš°ì„ , ì˜ë„ëŒ€ë¡œ ì¿¼ë¦¬ê°€ ë„˜ì–´ê°€ëŠ” ê²ƒ ê¹Œì§€ í™•ì¸ 








## `ì •ë ¬` ì¡°íšŒ (sorting)


### ì²´í¬ ë¦¬ìŠ¤íŠ¸ 
```jsx
/*
  1. Database.ts ì—ì„œ label ë° value ì„¤ì • 
   - value ëŠ” 'í•„ë“œëª…/ì˜¤ë¦„ì°¨ìˆœorë‚´ë¦¼ì°¨ìˆœ' ìœ¼ë¡œ ì„¤ì •
*/

    // [ê¸°ì¡´ë°©ì‹-1]
      export const selectReport5 = [
        {
          label: "ìµœì‹ ",
          value: "NEW",
        },
        {
          label: "ê³¼ê±°",
          value: "OLD",
        },
        {
          label: "ì‹ ê³  íšŸìˆ˜",
          value: "REPORT_COUNT",
        },
      ];
    
    // [depth-2 ë°©ì‹] ìš°ì„  ì´ê±¸ë¡œ ì§„í–‰í•¨! 
      export const selectReport5 = [
        {
          label: "ìµœì‹ ",
          value: "createAt/desc",
        },
        {
          label: "ê³¼ê±°",
          value: "createAt/asc",
        },
        {
          label: "ì‹ ê³  íšŸìˆ˜",
          value: "reportCnt/desc",
        },
      ];


/*
  2. Database ì—ì„œ ì„¤ì •í•œ value ê°€, 1) React Hook Form ì— ì˜ ë°˜ì˜ë˜ì–´ì„œ 2) API íƒˆ ë•Œ, ì¿¼ë¦¬ë¡œ ì˜ ì „ë‹¬ë˜ëŠ”ì§€ í™•ì¸ 
*/
    // 2-1) 
      // Database ì—ì„œ ë„£ì–´ì¤€ selectComments3 ì´ ê½‚íˆëŠ” íƒœê·¸ëŠ” Radio ì„. 
      // ì´ Radio ì˜ name ì´ orderType ì„. 
      // ê·¸ëŸ¬ë©´, React hook form ì— orderType ë¡œ ë“±ë¡ëœë‹¤ëŠ” ì˜ë¯¸
      // ê·¸ëŸ¬ë©´, React hook form ì˜ ì´ˆê¸°ê°’ ì„¤ì •ì—ì„œ orderType ì´ ì–´ë–»ê²Œ ë“¤ì–´ê°€ëŠ”ì§€ í™•ì¸
      <FilterOption
        title="ì •ë ¬"
        content={<Radio name="orderTypeAdmin" items={selectReport5} />}
      />

    // 2-2) React hook form ì´ˆê¸°ê°’ ì„¤ì • 
    const methods = useForm<FormInput>({
    mode: "onBlur",
    defaultValues: {
      ...
      deleted: "false",
      orderType: "createAt",  
        // â­â­ ì´ ìˆœê°„ì„ 'createAt/desc' ì´ë ‡ê²Œ í•  ìˆ˜ ìˆê¸´ í•¨ 
        // ê·¸ëŸ°ë°, 'createAt/desc' ì´ë ‡ê²Œ í•˜ë©´ -> í•´ë‹¹ radio ì²´í¬ë°•ìŠ¤ì— ìƒ‰ì´ ì¹ í•´ì§
        // ê·¸ë˜ì„œ, ê·¸ëƒ¥ 'createAt' í•„ë“œëª…ë§Œ! 
        // ë‹¤ë§Œ, value ë¥¼ 2ê°œì˜ depth ë¡œ ê¸°ë¡í•˜ëŠ” ë°©ì‹ì— ë¬¸ì œê°€ ìˆì„ ê²½ìš° ë‹¤ë¥´ê²Œ ê°ˆ ìˆ˜ë„
      },
  });

    // 2-3) í˜ì´ì§€ ì¿¼ë¦¬ì— ìˆì–´, API ê°€ ì–´ë–¤ parameter ë¥¼ ë°›ê³  ì‹¶ì–´í•˜ëŠ”ì§€ swagger ë³´ê³  í™•ì¸
      // ex) page.offset, page.size, page.sortBy, page.sortDirection
      -> í˜„ì¬ ì‹ ê³ ê´€ë¦¬ëŠ” api ê°€ ì•ˆ ë‚˜ì™€ì„œ pass

    // 2-4) getFreshData ì˜ orderType ì—ì„œ '/' split í•˜ì—¬ 2depth ë°ì´í„° ë½‘ê³  -> ìš”êµ¬í•˜ëŠ” params ì— ì—…ë°ì´í„° í•˜ê¸° 
      const getFreshData = useCallback(
    (data: any, page: number, tab: string) => {
      const { date, searchType, keyword, orderType, deleted } = data;

      // â­â­â­ orderType ì—ì„œ 2depth ë°ì´í„° ë½‘ê¸° 
      const [sortBy, sortDirection] = orderType.split('/');  // 'ì •ë ¬' ì„¹ì…˜ ì„¤ì •

      // â­â­â­ ë½‘ì€ ë°ì´í„°ëŠ” parameter ì— ì£¼ì…í•˜ê¸° 
      const updatedParams = {
        ...newParams,
        ...
        "page.offset": page,
        "page.sortBy" : sortBy, 
        "page.sortDirection" : sortDirection, 
        orderType: orderType,
      };
      getData(updatedParams);
    },
    [getData]
  );


/*
  3. ì´ˆê¸°ê°’ ëŒ€ë¡œ ì˜ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸ 
*/


/*
  4. 'ì´ˆê¸°í™”' í•˜ë©´ ì˜ ì‚¬ë¼ì§€ëŠ”ì§€ í™•ì¸ 
*/

/* 5. ì›í•˜ëŠ”ëŒ€ë¡œ 'ì¿¼ë¦¬' ë„˜ì–´ê°€ëŠ”ì§€ í™•ì¸ */

```


### ì§„í–‰ìƒí™© 
- [240904] ì¿¼ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒ ê¹Œì§€ í™•ì¸





## `ê²€ìƒ‰` ì¡°íšŒ 

### `ì²´í¬ë¦¬ìŠ¤íŠ¸` 

1. Database.ts ì—ì„œ ëª©ì°¨ ì£¼ì…í•˜ê¸° 
 



2. swagger ì—, query ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆëŠ” api ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ (#âœ… ì •ë§ ì™œ ê·¸ëŸ°ì§€ì— ëŒ€í•´ì„œëŠ” ì¢€ ë” ìƒê°)

(ì˜ˆì‹œ) https://dev2-service.api.antschool.nextinnovation.kr/swagger-ui/index.html#/User%20(Admin)/getUserListUsingGET
![Image](https://i.imgur.com/XyJ3mUZ.png)


(ì˜ˆì‹œ)headerì— ë„£ì„ ë•Œ í•„ë“œê°’ì€ `swagger` ì— ì§€ì •ëœ ê²ƒì„ ë„£ì–´ì•¼ í•¨ (#ë°±ì—”ë“œë‘ ì•½ì†ì´ ë˜ì–´ì•¼ í•¨ #íšŒì›ê´€ë¦¬ ìª½ ê²€ìƒ‰ ì°¸ê³  #api ê°€ ë¨¼ì € ë§Œë“¤ì–´ì ¸ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•´ì•¼ í•¨âœ…âœ…)
![Image](https://i.imgur.com/uVistZZ.png)
(https://dev2-service.api.antschool.nextinnovation.kr/swagger-ui/index.html#/User%20(Admin)/getUserListUsingGET) 


### í˜„ì¬ ìƒí™©
- [240904]
```
[1]'searchType' í•„ë“œê°€ ìˆëŠ” ê±´ 'íšŒì›ê´€ë¦¬' ë¿ 
[2] ëŒ“ê¸€ swagger ì—ëŠ” 'searchType' ì´ ì—†ìŒ 
[3] searchType ì´ ì•„ë‹ˆë¼, ë‹¤ë¥¸ í•„ë“œë¡œ ì‘ì—…ì„ í•´ì•¼ í•œë‹¤ë©´, ì„¤ëª…ì´ í•„ìš”í•œ ìƒí™©  
```
